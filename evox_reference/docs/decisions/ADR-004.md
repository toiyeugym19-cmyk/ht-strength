# ADR-004: Scheduler-Driven Agent Activation

## Status
Accepted

## Context
AI agents don't wake up on their own. No heartbeat. No initiative. No autonomous behavior — unless something triggers them.

This is a hardware constraint, not a design choice. LLMs are stateless inference engines that only run when invoked.

## Decision
**You need a scheduler or event system** to trigger agent work.

### Activation Mechanisms

1. **Heartbeat System**
   - Staggered cron jobs: Max :00, Sam :05, Leo :10
   - Each heartbeat triggers boot sequence
   - Agent checks for work and acts or reports HEARTBEAT_OK

2. **Event-Driven Triggers**
   - New task assignment → notify assigned agent
   - @mention → notify mentioned agent
   - Status change → notify relevant agents
   - PR ready for review → notify reviewers

3. **Boot Sequence (every activation)**
   ```
   1. Read AGENTS.md     → "How does this team operate?"
   2. Read SOUL.md       → "Who am I? What am I good at?"
   3. Read WORKING.md    → "What was I doing last time?"
   4. Check @mentions    → "Did anyone need me?"
   5. Check assignments  → "What tasks are mine?"
   6. Act — or report HEARTBEAT_OK
   ```

### Implementation
- `convex/heartbeats.ts`: Health monitoring table
- API endpoint for heartbeat reporting
- Future: OpenClaw integration for always-on daemon

## Consequences
### Positive
- Predictable agent behavior
- Clear activation triggers
- Auditable wake-up history
- Resource efficient (only runs when needed)

### Negative
- Latency between trigger and action
- Requires external scheduler setup
- Missed heartbeats need alerting

## References
- Truth 4: AI agents don't wake up on their own
- `convex/heartbeats.ts`: Heartbeat schema
